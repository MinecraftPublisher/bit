define SP $17000     # memory index to hold the stack pointer

macro init_stack()
    mov !SP, rA
    mov $17001, mA
end init_stack

macro push(arg)
    mov !SP, rA
    mov rB, mA       # move stack address to rB
    mov arg, mB      # move arg to stack value

    mov !SP, rA
    math add mA, $1  # increment stack value by one
end push

macro pop(put)
    mov !SP, rA
    mov mA, rB       # move stack address to rB
    mov mB, put      # move stack value to put

    mov !SP, rA
    math nand rC, $0 # create -1 in rC
    math add mA, rC  # add -1 to stack address value
end pop

@init_stack(sex)
@push($2)

mov rD, $17001
mov mD, rP